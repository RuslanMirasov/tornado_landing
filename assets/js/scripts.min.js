document.addEventListener("DOMContentLoaded",()=>{let e={scrollLinks:document.querySelectorAll("[data-scrollto]"),runTexts:document.querySelectorAll("[data-runtext]"),accordeon:document.querySelectorAll("[data-accordeon]"),inputs:document.querySelectorAll(".input[required]"),forms:document.querySelectorAll("[data-form]"),header:document.querySelector(".header")};function t(e){let t=e.offsetWidth,r=e.parentElement.offsetWidth,n=e.innerHTML,o=[n],l=t;for(;l<2*r;)l+=t,o.push(n);e.innerHTML=o.join("")}function r(e){let t=e.parentElement,r=e.outerHTML;t.insertAdjacentHTML("beforeend",r)}function n(e){let t=e.querySelector(".accordeon__body"),r=e.querySelector(".accordeon__answer").offsetHeight;if(e.classList.contains("active")){t.style.height=`${r}px`;return}t.style.height="0px"}function o(t){e.accordeon.forEach(e=>{if(e!==t){let r=e.querySelector(".accordeon__body");e.classList.remove("active"),r.style.height="0px"}})}function l(e){let t=e.querySelectorAll(".input[required]"),r=!0;return t.forEach(e=>{if(!e.value){c(e,"Заполните поле!"),r=!1;return}if("name"==e.name&&/[^A-zА-яЁё\+ ()\-]/.test(e.value)){c(e,"Имя может сожержать только буквы!"),r=!1;return}if("name"==e.name&&e.value.length<2){c(e,"Минимум 2 символа"),r=!1;return}if("email"==e.name&&!/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(e.value)){c(e,"Не верный формат E-mail!"),r=!1;return}}),r}function c(e,t){e.classList.add("red");let r=e.closest(".label"),n=r.querySelector(".error span");if(n){n.innerHTML=t;return}let o=`<div class="error"><span>${t}</span></div>`;r.insertAdjacentHTML("beforeend",o);let l=r.querySelector(".error");setTimeout(()=>{l.style.height="18px"},10)}e.scrollLinks.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();let r=`.${this.dataset.scrollto}`,n=document.querySelector(r).offsetTop-e.header.getBoundingClientRect().height;window.scrollTo({top:n,left:0,behavior:"smooth"})})}),e.runTexts.forEach(e=>{let n=e.querySelector(".runText__inner");t(n),r(n),e.classList.add("active")}),e.accordeon.forEach(e=>{let t=e.querySelector(".accordeon__head");t.addEventListener("click",function(e){let t=e.target.closest(".accordeon");o(t),t.classList.toggle("active"),n(t)})}),e.inputs.forEach(e=>{e.addEventListener("focus",function(){this.classList.remove("red");let e=this.nextElementSibling;e&&(e.style.height="0px",setTimeout(()=>{e.remove()},300))})}),e.forms.forEach(e=>{e.addEventListener("submit",function(e){e.preventDefault();let t=e.target,r=l(t);r&&alert("Отправка формы")})})});